<section class="view-file-section">
    <div class="lg-shared-header-section header-section">
        <div class="flex items-center ml-1.5 gap-4">
            <span class="text-2xl font-semibold text-gray-600 -mb-0.5">
                {{data.length}} ថ្នាក់រៀន
            </span>
        </div>
    </div>
    <div class="view-file-data" *ngIf="data.length > 0 && levels.length > 0">
       <div class="w-full h-max " *ngFor="let level of levels">
        <div class="lg-shared-header-section header-section">
            <div class="flex items-center ml-1.5 gap-4">
                <span class="text-2xl font-semibold text-gray-600 -mb-0.5">
                    {{level?.level_name}}
                </span>
            </div>
            <mat-button-toggle-group
                    name="classroom"
                    aria-label="classroom"
                    multiple
                    (change)="toggleSingleSelectionIndicator(level.level_id,$event)"
                >
                    <mat-button-toggle value="1"> ខ្មែរ </mat-button-toggle>
                    <mat-button-toggle value="2">អង់គ្លេស</mat-button-toggle>
                    <mat-button-toggle value="3"> ចិន </mat-button-toggle>
                </mat-button-toggle-group>
        </div>
        <ng-container class="pt-2">
            <div class="grid grid-cols-3 gap-4">
                <div *ngFor="let item of level.items; let i = index">
                    <div
                        class="relative w-full mt-5 flex border rounded-xl min-h-28 max-h-28 overflow-hidden"
                    >
                        <div
                            class="min-h-28 max-h-28 min-w-6 max-w-6 bg-blue-500 text-white"
                        >
                            <span
                                class="text-sm min-h-28 max-h-28 -translate-x-7 -rotate-90 w-20 flex items-center justify-center"
                            >
                                {{item?.grade}} / {{item?.language}}
                            </span>
                        </div>
                        <div class="flex flex-col">
                            <div class="flex">
                                <div class="w-1/3 flex justify-start p-2">
                                    <div class="flex flex-col">
                                        <div class="flex justify-between">
                                            <div class="w-full flex">
                                                <div
                                                    class="min-w-15 max-w-15 flex justify-start items-center"
                                                >
                                                    <mat-icon
                                                        class="icon-size-5"
                                                        [svgIcon]="
                                                            'feather:user'
                                                        "
                                                    ></mat-icon>
                                                </div>
                                                <div
                                                    class="max-w-90 min-w-90 flex justify-start items-center gap-2 -ml-8"
                                                >
                                                    <div
                                                        class="flex items-center gap-2 min-w-26"
                                                    >
                                                        <span
                                                            class="text-[15px] leading-8"
                                                        >
                                                            {{item.teacher_name}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="flex justify-between">
                                            <div class="w-full flex">
                                                <div
                                                    class="min-w-15 max-w-15 flex justify-start items-center"
                                                >
                                                    <mat-icon
                                                        class="icon-size-5"
                                                        [svgIcon]="
                                                            'heroicons_outline:academic-cap'
                                                        "
                                                    ></mat-icon>
                                                </div>
                                                <div
                                                    class="max-w-90 min-w-90 flex justify-start items-center gap-2 -ml-8"
                                                >
                                                    <div
                                                        class="flex items-center gap-2 min-w-26"
                                                    >
                                                        <span
                                                            class="truncate text-[15px] leading-8"
                                                        >
                                                        ​សរុប {{item?.total_students}} ( ស្រី {{item?.total_female_students}} នាក់)
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="flex justify-between">
                                            <div class="w-full flex">
                                                <div
                                                    class="min-w-15 max-w-15 flex justify-start items-center"
                                                >
                                                    <mat-icon
                                                        class="icon-size-5"
                                                        [svgIcon]="
                                                            'mat_outline:door_front'
                                                        "
                                                    ></mat-icon>
                                                </div>
                                                <div
                                                    class="max-w-90 min-w-90 flex justify-start items-center gap-2 -ml-8"
                                                >
                                                    <div
                                                        class="flex items-center gap-2 min-w-26"
                                                    >
                                                        <span
                                                            class="truncate text-[15px] leading-8"
                                                        >
                                                        {{item?.room}}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <span
                                    class="absolute top-[9px] -right-1 z-10 rotate-45 text-white text-center w-[48px]"
                                >
                                    {{item.schedule}}
                                </span>
                                <div
                                    class="absolute top-0 right-0 triangle-container -rotate-180"
                                ></div>

                        <div
                            class="absolute right-0 top-10 flex items-center justify-end mr-4"
                        >
                            <button mat-icon-button [matMenuTriggerFor]="menu">
                                <mat-icon
                                    class="icon-size-6"
                                    svgIcon="mat_outline:more_vert"
                                ></mat-icon>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="viewDetail(item)">
                                    <mat-icon
                                        class="icon-size-5 text-gray-500"
                                        svgIcon="mat_outline:remove_red_eye"
                                    ></mat-icon>
                                    <span class="text-lg text-gray-500"
                                        >មើលលម្អិត</span
                                    >
                                </button>
                            </mat-menu>
                        </div>
                    </div>
                </div>
            </div>
        </ng-container>
       </div>
    </div>
    <div *ngIf="data.length === 0" class="flex flex-col justify-center items-center mb-4">
        <mat-icon class="icon-size-16" svgIcon="toc"></mat-icon>
        <span class="text-lg -mt-4">គ្មានទិន្នន័យ</span>
    </div>
</section>
